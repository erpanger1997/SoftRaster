#include "Scene.h"


//储存所有渲染物体
vector<Object_t> Scene_render_Objs;

void vertex_add(vertex_t *y, const vertex_t *x) {

	y->pos += x->pos;
	y->worldPos += x->worldPos;
	y->tc += x->tc;

	y->color += x->color;

	y->shadowPos_z += x->shadowPos_z;
}
//方向光
dirlight_t dirLight =
{
	{0,-10,-10,1},
	{0.3f, 0.3f, 0.3f, 0.3f},
	true,
};



//环境光，暂时只给一个环境光的强度和颜色
Light_t AmbientLight =
{
	0.3f,0.3f,0.3f,0.5f,false,
};

//以后给的地面加上缩放
//地面
vertex_t ground_mesh[6] = {
	// Positions            // 纹理坐标uv （Texture Coords）    //color           //rhw // Normals
	{ { -0.5f,  0.0f, -0.5f, 1.0f },{ 0.0f,  1.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f, 1.0f,  0.0f,0.0f } },
	{ { -0.5f,  0.0f,  0.5f, 1.0f },{ 0.0f,  0.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f, 1.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.0f,  0.5f, 1.0f },{ 1.0f,  0.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f,1.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.0f,  0.5f, 1.0f },{ 1.0f,  0.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f,1.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.0f, -0.5f, 1.0f },{ 1.0f,  1.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f,1.0f,  0.0f,0.0f } },
	{ { -0.5f,  0.0f, -0.5f, 1.0f },{ 0.0f,  1.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f, 1.0f,  0.0f,0.0f } }
};

//如何拆面 颜色
vertex_t mesh[8] = { // 8个点，构成一个正方体，需要自己赋值uv
	 //位置、 x,y,z,w     纹理坐标uv  颜色 rgb            
	{ { 1, -1,  1, 1 },{ 0, 0 },{ 1.0f, 0.2f, 0.2f } },
	{ { -1, -1,  1, 1 },{ 0, 1 },{ 0.2f, 1.0f, 0.2f }},
	{ { -1,  1,  1, 1 },{ 1, 1 },{ 0.2f, 0.2f, 1.0f }},
	{ { 1,  1,  1, 1 },{ 1, 0 },{ 1.0f, 0.2f, 1.0f } },

	{ { 1, -1, -1, 1 },{ 0, 0 },{ 1.0f, 1.0f, 0.2f } },
	{ { -1, -1, -1, 1 },{ 0, 1 },{ 0.2f, 1.0f, 1.0f }},
	{ { -1,  1, -1, 1 },{ 1, 1 },{ 1.0f, 0.3f, 0.3f }},
	{ { 1,  1, -1, 1 },{ 1, 0 },{ 0.2f, 1.0f, 0.3f } },
};


//顶点是顺时针

//因为颜色是点，所以w= 1；   normals是向量，所以w =0
vertex_t box_mesh[36] = {
	// Positions                  // Texture Coords   //color       // Normals
	{ { -0.5f, -0.5f, -0.5f, 1.0f },{ 0.0f,  0.0f },{ 1.0f, 0.2f, 0.2f, 1.0f },{ 0.0f,  0.0f,-1.0f,0.0f } },//6个顶点为一个面    前三个为一个三角形，后三个为一个三角形
	{ { -0.5f,  0.5f, -0.5f, 1.0f },{ 0.0f,  1.0f },{ 1.0f, 0.2f, 0.2f, 1.0f },{ 0.0f,  0.0f,-1.0f,0.0f } },
	{ { 0.5f,  0.5f, -0.5f, 1.0f },{ 1.0f,  1.0f },{ 1.0f, 0.2f, 0.2f, 1.0f },{ 0.0f,  0.0f,-1.0f ,0.0f } },
	{ { 0.5f,  0.5f, -0.5f, 1.0f },{ 1.0f,  1.0f },{ 1.0f, 0.2f, 0.2f, 1.0f },{ 0.0f,  0.0f,-1.0f,0.0f } },
	{ { 0.5f, -0.5f, -0.5f, 1.0f },{ 1.0f,  0.0f },{ 1.0f, 0.2f, 0.2f, 1.0f },{ 0.0f,  0.0f,-1.0f ,0.0f } },
	{ { -0.5f, -0.5f, -0.5f, 1.0f },{ 0.0f,  0.0f },{ 1.0f, 0.2f, 0.2f, 1.0f },{ 0.0f,  0.0f,-1.0f,0.0f } },

	{ { -0.5f, -0.5f,  0.5f, 1.0f },{ 0.0f,  0.0f },{ 0.2f, 1.0f, 0.2f, 1.0f },{ 0.0f,  0.0f, 1.0f,0.0f } },
	{ { 0.5f, -0.5f,  0.5f, 1.0f },{ 1.0f,  0.0f },{ 0.2f, 1.0f, 0.2f, 1.0f },{ 0.0f,  0.0f,  1.0f,0.0f } },
	{ { 0.5f,  0.5f,  0.5f, 1.0f },{ 1.0f,  1.0f },{ 0.2f, 1.0f, 0.2f, 1.0f },{ 0.0f,  0.0f,  1.0f,0.0f } },
	{ { 0.5f,  0.5f,  0.5f, 1.0f },{ 1.0f,  1.0f },{ 0.2f, 1.0f, 0.2f, 1.0f },{ 0.0f,  0.0f,  1.0f,0.0f } },
	{ { -0.5f,  0.5f,  0.5f, 1.0f },{ 0.0f,  1.0f },{ 0.2f, 1.0f, 0.2f, 1.0f },{ 0.0f,  0.0f,  1.0f,0.0f } },
	{ { -0.5f, -0.5f,  0.5f, 1.0f },{ 0.0f,  0.0f },{ 0.2f, 1.0f, 0.2f, 1.0f },{ 0.0f,  0.0f,  1.0f,0.0f } },

	{ { -0.5f,  0.5f,  0.5f, 1.0f },{ 1.0f,  0.0f },{ 0.2f, 0.2f, 1.0f, 1.0f },{ -1.0f,  0.0f,  0.0f,0.0f } },
	{ { -0.5f,  0.5f, -0.5f, 1.0f },{ 1.0f,  1.0f },{ 0.2f, 0.2f, 1.0f, 1.0f },{ -1.0f,  0.0f,  0.0f,0.0f } },
	{ { -0.5f, -0.5f, -0.5f, 1.0f },{ 0.0f,  1.0f },{ 0.2f, 0.2f, 1.0f, 1.0f },{ -1.0f,  0.0f,  0.0f,0.0f } },
	{ { -0.5f, -0.5f, -0.5f, 1.0f },{ 0.0f,  1.0f },{ 0.2f, 0.2f, 1.0f, 1.0f },{ -1.0f,  0.0f,  0.0f,0.0f } },
	{ { -0.5f, -0.5f,  0.5f, 1.0f },{ 0.0f,  0.0f },{ 0.2f, 0.2f, 1.0f, 1.0f },{ -1.0f,  0.0f,  0.0f,0.0f } },
	{ { -0.5f,  0.5f,  0.5f,1.0f },{ 1.0f,  0.0f },{ 0.2f, 0.2f, 1.0f, 1.0f },{ -1.0f,  0.0f,  0.0f,0.0f } },

	{ { 0.5f,  0.5f,  0.5f,1.0f },{ 1.0f,  0.0f },{ 1.0f, 0.2f, 1.0f, 1.0f },{ 1.0f,  0.0f,  0.0f,0.0f } },
	{ { 0.5f, -0.5f,  0.5f,1.0f },{ 0.0f,  0.0f },{ 1.0f, 0.2f, 1.0f, 1.0f },{ 1.0f,  0.0f,  0.0f,0.0f } },
	{ { 0.5f, -0.5f, -0.5f,1.0f },{ 0.0f,  1.0f },{ 1.0f, 0.2f, 1.0f, 1.0f },{ 1.0f,  0.0f,  0.0f,0.0f } },
	{ { 0.5f, -0.5f, -0.5f,1.0f },{ 0.0f,  1.0f },{ 1.0f, 0.2f, 1.0f, 1.0f },{ 1.0f,  0.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.5f, -0.5f,1.0f },{ 1.0f,  1.0f },{ 1.0f, 0.2f, 1.0f, 1.0f },{ 1.0f,  0.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.5f,  0.5f,1.0f },{ 1.0f,  0.0f },{ 1.0f, 0.2f, 1.0f, 1.0f },{ 1.0f,  0.0f,  0.0f,0.0f } },

	{ { -0.5f, -0.5f, -0.5f,1.0f },{ 0.0f,  1.0f },{ 1.0f, 1.0f, 0.2f, 1.0f },{ 0.0f, -1.0f,  0.0f,0.0f } },
	{ { 0.5f, -0.5f, -0.5f,1.0f },{ 1.0f,  1.0f },{ 1.0f, 1.0f, 0.2f, 1.0f },{ 0.0f, -1.0f,  0.0f,0.0f } },
	{ { 0.5f, -0.5f,  0.5f,1.0f },{ 1.0f,  0.0f },{ 1.0f, 1.0f, 0.2f, 1.0f },{ 0.0f, -1.0f,  0.0f,0.0f } },
	{ { 0.5f, -0.5f,  0.5f,1.0f },{ 1.0f,  0.0f },{ 1.0f, 1.0f, 0.2f, 1.0f },{ 0.0f, -1.0f,  0.0f,0.0f } },
	{ { -0.5f, -0.5f,  0.5f,1.0f },{ 0.0f,  0.0f },{ 1.0f, 1.0f, 0.2f, 1.0f },{ 0.0f, -1.0f,  0.0f,0.0f } },
	{ { -0.5f, -0.5f, -0.5f,1.0f },{ 0.0f,  1.0f },{ 1.0f, 1.0f, 0.2f, 1.0f },{ 0.0f, -1.0f,  0.0f,0.0f } },

	{ { -0.5f,  0.5f, -0.5f, 1.0f },{ 0.0f,  1.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f, 1.0f,  0.0f,0.0f } },
	{ { -0.5f,  0.5f,  0.5f, 1.0f },{ 0.0f,  0.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f, 1.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.5f,  0.5f, 1.0f },{ 1.0f,  0.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f,1.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.5f,  0.5f, 1.0f },{ 1.0f,  0.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f,1.0f,  0.0f,0.0f } },
	{ { 0.5f,  0.5f, -0.5f, 1.0f },{ 1.0f,  1.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f,1.0f,  0.0f,0.0f } },
	{ { -0.5f,  0.5f, -0.5f, 1.0f },{ 0.0f,  1.0f },{ 0.2f, 1.0f, 1.0f, 1.0f },{ 0.0f, 1.0f,  0.0f,0.0f } }
};

